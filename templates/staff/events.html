{% extends "layout.html" %}

{% block title %}My Events - QMS{% endblock %}

{% block header_button %}
{% include 'components/user_header.html' %}
{% endblock %}

{% block content %}
<h2 class="text-3xl font-semibold mb-8 text-gray-100">My Events Dashboard</h2>

{% if not events %}
<div class="card p-8 text-center">
    <h3 class="text-2xl font-semibold mb-4 text-white">No Events Assigned</h3>
    <p class="text-gray-300">Events must be created and assigned to you by the **Super Admin**.</p>
    <p class="text-gray-400 mt-2">Please contact the Super Admin to set up your event.</p>
</div>
{% endif %}

<div class="space-y-6">
    {% if events %}
    {% for event in events %}
    <div class="card p-6 md:p-8">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-5 gap-2">
            <span class="text-2xl font-semibold text-blue-300">{{ event['event_name'] }}</span>
            <span class="text-sm text-gray-400">Event ID: <b class="font-mono text-gray-200">{{ event['event_id']
                    }}</b></span>
        </div>
        <div class="flex flex-col md:flex-row items-center gap-8 mb-6">
            <img src="{{ url_for('qr_code_route', event_id=event['event_id']) }}" alt="Event QR Code"
                class="p-3 bg-white border-4 border-gray-300 rounded-lg">
            <div class="flex-grow">
                <p class="text-sm text-gray-200 mt-2">Scan the code or use the link:</p>
                <a href="{{ event['url'] }}"
                    class="text-blue-400 hover:text-blue-300 underline break-all text-lg font-medium" target="_blank">{{
                    event['url'] }}</a>
                <p class="text-sm text-gray-400 mt-4">Form fields are managed by the Super Admin.</p>
            </div>
        </div>
        <div class="text-right border-t border-gray-700 pt-5">
            <a href="{{ url_for('view_logs', event_id=event['event_id']) }}" class="btn btn-primary">View Live Logs</a>
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>
{% endblock %}